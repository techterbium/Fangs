<!DOCTYPE HTML>
<html ng-app="myCartApp">
    <head>
        <title>Not My Application Cart</title>
        <link rel="stylesheet" href="css/bootstrap.css" />
        <script src="js/angular.min.js"></script>
        <script src="js/angular-sanitize.min.js"></script>
        <script src="js/cartapp.js"></script>
        <script src="js/appController.js"></script>
    </head>
    <body class="container">
        <div ng-init="appHeading='AJS <u>Shopping Cart</u>';tagLine='Buy stuff here'">
            <h1><span ng-bind-html="appHeading"></span> <small>{{tagLine}}</small></h1>
        </div>
        <div class="row">
            <div class="col-sm-5 well" ng-controller="ProductController">
                <h3>Product Catalog</h3>
                <table class="table table-bordered table-striped">
                    <tr>
                        <th>Product Name</th>
                        <th>Price</th>
                        <th>Action</th>
                    </tr>
                    <tr ng-repeat="product in products">
                        <td>{{product.name}}</td>
                        <td>{{product.price | currency:"$"}}</td>
                        <td>
                            <button class="btn btn-primary" ng-click="addToCart(product)">
                                <span class="glyphicon glyphicon-shopping-cart">Add to Cart</span>
                            </button>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="col-sm-5 col-sm-offset-2 well" ng-controller="CartController">
                <h3>Your Cart
                    <small>Size:
                        <span class="label label-primary">
                            {{productsInCart.length}}
                        </span>
                    </small></h3>
                <table class="table table-bordered table-striped">
                    <tr>
                        <th></th>
                        <th>Product Name</th>
                        <th>Price</th>
                        <th>Quantity</th>
                        <th>Amount</th>
                    </tr>
                    <tr ng-repeat="productInCart in productsInCart">
                        <td>
                            <button
                                    class="btn btn-danger btn-xs"
                                    ng-click=removeFromCart($index)>
                                <span class="glyphicon glyphicon-remove"></span>
                            </button>
                        </td>
                        <td>{{productInCart.name}}</td>
                        <td>{{productInCart.price | currency:"$"}}</td>
                        <td>
                            <input size="2"
                                   type="number"
                                   style="width:50px"
                                   ng-model="productInCart.quantity"
                                   value="{{productInCart.quantity}}">
                        </td>
                        <td>{{(productInCart.price * productInCart.quantity) | currency:"$"}}</td>
                    </tr>
                    <tr>
                        <td colspan="5">
                            Cart Value : {{totalAmount() | currency:"$"}}
                        </td>
                    </tr>
                    <tr>
                        <td colspan="5"><button class="btn btn-success" ng-click="checkOut()">Check Out</button></td>
                    </tr>
                </table>
            </div>
        </div>
        <h1 ng-show="byeMessage">Sit back and relax..your stuff just shipped off from Mars..</h1>
        <h1 ng-show="poorMessage">Oh poor boy.. not dollars to buy stuff?</h1>
    </body>
</html>
